{"title":"$:/plugins/benwebber/rating","name":"rating","description":"Add simple star ratings to tiddlers","author":"Ben Webber","version":"0.1.0","core-version":">=5.2.1","source":"https://github.com/benwebber/tiddlywiki-plugins","plugin-type":"plugin","list":"README","license":"MIT","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/benwebber/rating/README\":{\"title\":\"$:/plugins/benwebber/rating/README\",\"text\":\"''rating'' adds a macro to render simple star ratings.\\n\\n{{$:/plugins/benwebber/rating/macros/public}}\\n\"},\"$:/plugins/benwebber/rating/config/DefaultField\":{\"title\":\"$:/plugins/benwebber/rating/config/DefaultField\",\"text\":\"rating\"},\"$:/plugins/benwebber/rating/styles/static\":{\"text\":\".tw-sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.tw-m-0{margin:0}.tw-ml-2{margin-left:.5rem}.tw-mt-px{margin-top:1px}.tw-flex{display:flex}.tw-hidden{display:none}.tw-h-\\\\[0\\\\.8rem\\\\]{height:.8rem}.tw-w-\\\\[0\\\\.8rem\\\\]{width:.8rem}.tw-list-none{list-style-type:none}.tw-space-x-0\\\\.5>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(.125rem*var(--tw-space-x-reverse));margin-left:calc(.125rem*(1 - var(--tw-space-x-reverse)))}.tw-space-x-0>:not([hidden])~:not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0px*var(--tw-space-x-reverse));margin-left:calc(0px*(1 - var(--tw-space-x-reverse)))}.tw-p-0{padding:0}.rating input{-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer;height:1rem;-webkit-mask-image:var(--mask-image);mask-image:var(--mask-image);-webkit-mask-size:contain;mask-size:contain;width:1rem}.rating input:disabled{cursor:default}.rating.rating-disabled .rating-cancel{display:none!important}.tw-group:focus-within .group-focus-within\\\\:tw-block,.tw-group:hover .group-hover\\\\:tw-block{display:block}\",\"title\":\"$:/plugins/benwebber/rating/styles/static\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/benwebber/rating/macros/private\":{\"title\":\"$:/plugins/benwebber/rating/macros/private\",\"text\":\"\\\\define clear()\\n<$action-deletefield $tiddler=<<tiddler>> $field=<<field>> />\\n\\\\end\\n\\n<!-- https://www.telumire.be/TiddlyTweaks/#Trick%20to%20convert%20the%20core%20images%20to%20SVG%20image -->\\n\\\\define svgTiddlerDataURI() <$text text={{{[[data:image/svg+xml;utf8,<svg xmlns=\\\"http://www.w3.org/2000/svg\\\"]][[ width=\\\"22pt\\\" height=\\\"22pt\\\">]][title<__icon__>get[text]][[</svg>]]+[join[]]}}} />\\n\"},\"$:/plugins/benwebber/rating/macros/public\":{\"title\":\"$:/plugins/benwebber/rating/macros/public\",\"tags\":\"$:/tags/Macro\",\"text\":\"\\\\define rating(tiddler, field, min: \\\"1\\\", max: \\\"5\\\", icon: \\\"$:/core/images/star-filled\\\", disabled: \\\"no\\\")\\n\\\\import [[$:/plugins/benwebber/rating/macros/private]]\\n<$let\\n  tiddler={{{ [<__tiddler__>is[blank]then<currentTiddler>else<__tiddler__>] }}}\\n  defaultField={{$:/plugins/benwebber/rating/config/DefaultField}}\\n  field={{{ [<__field__>is[blank]then<defaultField>else<__field__>] }}}\\n  svgImageDataURI=<<datauri \\\"\\\"\\\"$icon$\\\"\\\"\\\">>\\n  dataURI={{{ [title<__icon__>field:type[image/svg+xml]then<svgImageDataURI>else<svgTiddlerDataURI>] }}}\\n>\\n<$wikify name=style text=\\\"\\\"\\\"`--`mask-image:url('<<dataURI>>');\\\"\\\"\\\">\\n<div class={{{ tw-flex tw-group rating [<__disabled__>match:caseinsensitive[yes]then[rating-disabled]] +[join[ ]] }}} style=<<style>>>\\n  <ul  class=\\\"rating-list tw-flex tw-m-0 tw-p-0 tw-space-x-0.5\\\">\\n    <$list filter=\\\"[range<__min__>,<__max__>]\\\" variable=\\\"i\\\">\\n      <li class={{{ tw-list-none rating-list-item [title<tiddler>get<field>compare:number:gteq<i>then[rating-list-item-selected]] +[join[ ]] }}}>\\n        <$radio field=<<field>> value=<<i>> disabled=<<__disabled__>>><span class=\\\"tw-sr-only\\\"><<i>></span></$radio>\\n      </li>\\n    </$list>\\n  </ul>\\n  <$button class=\\\"tc-btn-invisible tw-hidden tw-h-[0.8rem] tw-ml-2 tw-mt-px tw-w-[0.8rem] group-hover:tw-block group-focus-within:tw-block rating-cancel\\\" tooltip=\\\"Clear\\\" aria-label=\\\"Clear\\\" actions=<<clear>>>\\n    {{$:/core/images/close-button}}\\n  </$button>\\n</div>\\n</$wikify>\\n</$let>\\n\\\\end\\n\\n!! `rating`\\n\\nRender a star rating.\\n\\n!!! Parameters\\n\\n;tiddler\\n: Optional title of the tiddler to modify. The default is the [ext[current tiddler|https://tiddlywiki.com/#Current%20Tiddler]].\\n\\n;field\\n: Field that will store the rating. The default is <code>{{$:/plugins/benwebber/rating/config/DefaultField}}</code>.\\n\\n;min\\n: Minimum rating (positive integer). The default is <code>1</code>.\\n\\n;max\\n: Maximum rating (positive integer). The default is <code>5</code>.\\n\\n;icon\\n: An SVG to use as a mask. Supports embedded SVG elements (e.g., [ext[core images|https://tiddlywiki.com/#Icon%20Gallery]]) as well as [ext[SVG document tiddlers|https://tiddlywiki.com/#Using%20SVG]]. The default is [[$:/core/images/star-filled]].\\n\\n;disabled\\n: If `yes`, render a read-only version of the component. The default is `no`.\\n\"},\"$:/plugins/benwebber/rating/styles/dynamic\":{\"title\":\"$:/plugins/benwebber/rating/styles/dynamic\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".rating .rating-list-item input {\\n  background: <<colour muted-foreground>>;\\n}\\n\\n.rating .rating-list-item-selected input {\\n  background: <<colour foreground>>;\\n}\\n\\n.rating .rating-list-item-selected:last-child ~ .rating-list-item input {\\n  background: <<colour muted-foreground>>;\\n}\\n\\n.rating .rating-list:hover .rating-list-item input:not(:disabled),\\n.rating .rating-list:focus-within .rating-list-item input:not(:disabled) {\\n  background: <<colour foreground>>;\\n}\\n\\n.rating .rating-list-item:hover ~ .rating-list-item input:not(:disabled),\\n.rating .rating-list-item:focus-within ~ .rating-list-item input:not(:disabled) {\\n  background: <<colour muted-foreground>>;\\n}\\n\\n.rating .rating-list:focus-within  .rating-list-item input:not(:disabled):focus-visible {\\n  background: <<colour primary>>;\\n}\\n\\n.rating .rating-cancel {\\n  fill: <<colour muted-foreground>>;\\n}\\n\\n.rating:hover .rating-cancel:hover {\\n  fill: <<colour foreground>>;\\n}\\n\"}}}"}