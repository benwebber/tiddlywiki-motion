{"title":"$:/plugins/benwebber/decimal","name":"decimal","description":"Manage decimal classification systems","author":"Ben Webber","version":"0.1.0","core-version":">=5.2.1","source":"https://github.com/benwebber/tiddlywiki-plugins","plugin-type":"plugin","list":"README","license":"MIT","dependents":"","type":"application/json","text":"{\"tiddlers\":{\"$:/plugins/benwebber/decimal/README\":{\"title\":\"$:/plugins/benwebber/decimal/README\",\"text\":\"''decimal'' helps you manage decimal classification systems with TiddlyWiki.\\n\\n{{$:/plugins/benwebber/decimal/macros/public}}\\n\"},\"$:/plugins/benwebber/decimal/styles/static\":{\"text\":\".tw-invisible{visibility:hidden}.tw-w-0{width:0}.tw-w-full{width:100%}.tw-whitespace-nowrap{white-space:nowrap}.tw-border-0{border-width:0}.decimal th{text-align:start;background:none;border-style:solid;border-width:1px 0}\",\"title\":\"$:/plugins/benwebber/decimal/styles/static\",\"type\":\"text/css\",\"tags\":\"$:/tags/Stylesheet\"},\"$:/plugins/benwebber/decimal/macros/private\":{\"title\":\"$:/plugins/benwebber/decimal/macros/private\",\"text\":\"<!-- NOTE: addprefix should not use `separator` to treat IDs as decimals. -->\\n\\\\define sortsub() [all[current]search-replace:g<__separator__>,[]addprefix[.]]\\n\"},\"$:/plugins/benwebber/decimal/macros/public\":{\"title\":\"$:/plugins/benwebber/decimal/macros/public\",\"tags\":\"$:/tags/Macro\",\"text\":\"\\\\define decimal.index(tiddler headings:\\\"\\\" caption:\\\"caption\\\" separator:\\\".\\\" class:\\\"\\\")\\n<$let\\n  tiddler={{{ [<__tiddler__>!is[blank]] ~[<currentTiddler>] }}}\\n  ids=\\\"[all[current]indexes[]sortsub:number<sortsub>]\\\"\\n  tiddlers=\\\"[all[current]getindex<id>]\\\"\\n>\\n  <$tiddler tiddler=<<tiddler>>>\\n    {{||$:/plugins/benwebber/decimal/templates/index}}\\n  </$tiddler>\\n</$let>\\n\\\\end\\n\\n\\\\define decimal.list-index(filter field:\\\"decimal.id\\\" headings:\\\"\\\" caption:\\\"caption\\\" separator:\\\".\\\" class:\\\"\\\") \\n\\\\import [[$:/plugins/benwebber/decimal/macros/private]]\\n<$let\\n  ids=\\\"\\\"\\\"$filter$ +[get[$field$]sortsub:number<sortsub>]\\\"\\\"\\\"\\n  tiddlers=\\\"\\\"\\\"$filter$ :filter[get[$field$]match<id>]\\\"\\\"\\\"\\n>\\n  {{||$:/plugins/benwebber/decimal/templates/index}}\\n</$let>\\n\\\\end\\n\\n!! `decimal.index`\\n\\nRender a data tiddler describing a decimal classification system.\\n\\n!!! Parameters\\n\\n;tiddler\\n: The tiddler to render. The default is the [ext[current tiddler|https://tiddlywiki.com/#Current Tiddler]].\\n\\n;headings\\n: A filter identifying top-level IDs in the system. These rows will be rendered as table headings (with `th` tags) instead of normal cells.\\n\\n;caption\\n: Render this field, falling back on the tiddler `title`. The default is `caption`.\\n\\n;separator\\n: Use this separator to separate each level in the system. The default is `.`.\\n\\n;class\\n: Add this class to the table.\\n\\n!! `decimal.list-index`\\n\\nRender a selection of tiddlers describing a decimal classification system.\\n\\n!!! Parameters\\n\\n;filter\\n: A [ext[filter|https://tiddlywiki.com/#Filters]] selecting the tiddlers to list. You do not need to add a filter for the field name. The macro automatically filters this list further by `field`.\\n\\n;field\\n: The field that stores each tiddler's decimal classification system ID. The default is `decimal.id`.\\n\\n;headings\\n: A filter identifying top-level IDs in the system. These rows will be rendered as table headings (with `th` tags) instead of normal cells.\\n\\n;caption\\n: Render this field, falling back on the tiddler `title`. The default is `caption`.\\n\\n;separator\\n: Use this separator to separate each level in the system. The default is `.`.\\n\\n;class\\n: Add this class to the table.\\n\"},\"$:/plugins/benwebber/decimal/styles/dynamic\":{\"title\":\"$:/plugins/benwebber/decimal/styles/dynamic\",\"tags\":\"$:/tags/Stylesheet\",\"text\":\".decimal th {\\n  border-color: <<colour \\\"table-border\\\">>;\\n}\\n\"},\"$:/plugins/benwebber/decimal/templates/index\":{\"title\":\"$:/plugins/benwebber/decimal/templates/index\",\"text\":\"\\\\define row(tag)\\n<tr\\n  class={{{ [subfilter<__headings__>] :intersection[<id>] +[then[decimal-heading]] +[join[ ]] }}}\\n  data-decimal-id=<<id>>\\n  data-decimal-level={{{ [<id>split<__separator__>count[]] }}}\\n>\\n  <$tag$ class=\\\"decimal-id tw-border-0 tw-w-0 tw-whitespace-nowrap\\\">\\n    <data value={{{ [<id>] }}}>\\n      <$list filter=\\\"[<id>split<__separator__>count[]compare:number:gt[1]]\\\" emptyMessage=<<id>>>\\n        <$let\\n          prefix={{{ [<id>split<__separator__>butlast[]join<__separator__>] }}}\\n          suffix={{{ [<id>split<__separator__>last[]addprefix<__separator__>] }}}\\n        >\\n          <span class=\\\"tw-invisible\\\"><<prefix>></span><<suffix>>\\n        </$let>\\n      </$list>\\n    </data>\\n  </$tag$>\\n  <$tag$ class=\\\"decimal-label tw-border-0\\\">\\n    <$link>\\n      <$transclude field=<<__caption__>>>\\n        {{!!title}}\\n      </$transclude>\\n    </$link>\\n  </$tag$>\\n</tr>\\n\\\\end\\n\\n<$list filter=\\\"[<currentTiddler>] -[[$:/plugins/benwebber/decimal/templates/index]]\\\">\\n  <table class={{{ [<__class__>!is[blank]] decimal tw-border-0 tw-w-full +[join[ ]] }}}>\\n    <$list filter=<<ids>> variable=id>\\n      <$list filter=<<tiddlers>>>\\n        <$let tag={{{ [subfilter<__headings__>] :intersection[<id>] +[then[th]] ~[[td]] }}}>\\n          <$macrocall $name=row tag=<<tag>> />\\n          </$let>\\n      </$list>\\n    </$list>\\n  </table>\\n</$list>\\n\"}}}"}